<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>My Imageboard</title>
        <link rel="stylesheet" href="/css/style.css" />
    </head>
    <body>
        <div class="board">
            <modal-img
                v-if="showModal"
                :img-id="showModal"
                :arr-new="images"
                @close="insideMainClose"
            ></modal-img>
            <header>I ❤️ PIXELS</header>
            <section id="addImg">
                <p>Add an image</p>
                <label for="title">Title:</label>
                <input v-model="title" type="text" id="title" />
                <label for="description">Description:</label>
                <input v-model="description" type="text" id="description" />
                <label for="username">Username:</label>
                <input v-model="username" type="text" id="username" />
                <input
                    type="file"
                    id="file"
                    accept="image/*"
                    @change="handleFileSelection"
                    :key="componentKey"
                />
                <button @click="uploadImage()">Upload</button>
                <p
                    class="error"
                    :style="{visibility: showError ? 'visible' : 'hidden'}"
                >
                    Please fill in title, description, username and choose a
                    file not exceeding 2 megabytes
                </p>
            </section>
            <section id="latest">Latest images</section>
            <main>
                <a
                    v-for="image in images"
                    :key="image.id"
                    :href="'#' + image.id"
                    class="cards"
                >
                    <div class="insideCard">
                        <img
                            :alt="image.description"
                            class="imageCard"
                            :src="image.url"
                        />
                        <div class="textCard">{{image.title}},{{image.id}}</div>
                    </div>
                </a>
                <button v-if="showButton" @click="getLowestId()" id="moreImg">
                    MORE
                </button>
            </main>
        </div>
        <script id="modal-img-template" type="text/x-template">
            <div v-if="mdlShow" class="modal">
                <div class="overlay">
                       <div class="modalWData">
                <div class="closeWrapper"><h1 class="closeEl" @click="insideComponentClose">X</h1></div>
                <div class="modalContainer">

                        <div class="modalImg">
                            <img  :alt="modalImgData.description" :src="modalImgData.url" class="imageInside"></div>
                            <div class="modalDesc">
                            <h1>{{modalImgData.title}}</h1>
                            <p>{{modalImgData.description}}</p>
                            <p>Uploaded by {{modalImgData.username}} on {{modalImgData.created_at}}</p>

                        </div>
                        <comments-sect v-bind="$props"></comments-sect>
                    </div>
                </div>
            </div>
                </div>
        </script>
        <script id="comments-sect-template" type="text/x-template">
            <div>
                <h1>{{ heading }}</h1>
                <label for="usernameComment">Username:</label>
                <input v-model="username" type="text" id="usernameComment" />
                <label for="commentInput">Comment:</label>
                <input v-model="commentInput" type="text" id="commentInput" />
                <p v-if="showCommentErr">Please provide your username and a comment before sending</p>
                <button @click="sendComment()">Send</button>
                <p v-if="noComments">No comments</p>
                 <div
                    v-for="comment in comments"
                    :key="comment.id"
                >{{comment.comment_text}}, {{comment.username}}, {{convertDate(comment.created_at)}}</div>
            </div>
        </script>
        <script src="/js/vue.js"></script>
        <script src="/js/axios.min.js"></script>
        <script src="/js/script.js"></script>
    </body>
</html>
